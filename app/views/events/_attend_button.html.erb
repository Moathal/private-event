 <% if Array(unattending_users).exclude?(current_user) || attend.present? ? ['pending', 'canceled'].exclude?(attend.status) : false %>
    <%= button_to "Cancel Attendance", attend_event_path(event), method: :delete, remote: true %>
<% else %>
    <%= button_to "Attend", attend_event_path(event), method: :post, remote: true %>
<% end %>